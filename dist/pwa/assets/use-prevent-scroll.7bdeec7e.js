import{u as A,ax as G,v as O,q as X,E as _,ay as y,r as $,C as Y,ap as B,h as j,az as k,aA as I,aB as K,x as N,aC as F,O as v,z as c,K as x,aD as R}from"./index.4e7ffe61.js";import{b as U,c as J}from"./focus-manager.4350be2f.js";import{b as Z,a as ee,h as te}from"./scroll.fd17398b.js";const de={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},ce=["beforeShow","show","beforeHide","hide"];function fe({showing:e,canShow:t,hideOnRouteChange:l,handleShow:r,handleHide:i,processOnMount:a}){const s=X(),{props:n,emit:u,proxy:g}=s;let d;function m(o){e.value===!0?E(o):w(o)}function w(o){if(n.disable===!0||o!==void 0&&o.qAnchorHandled===!0||t!==void 0&&t(o)!==!0)return;const f=n["onUpdate:modelValue"]!==void 0;f===!0&&(u("update:modelValue",!0),d=o,_(()=>{d===o&&(d=void 0)})),(n.modelValue===null||f===!1)&&H(o)}function H(o){e.value!==!0&&(e.value=!0,u("beforeShow",o),r!==void 0?r(o):u("show",o))}function E(o){if(n.disable===!0)return;const f=n["onUpdate:modelValue"]!==void 0;f===!0&&(u("update:modelValue",!1),d=o,_(()=>{d===o&&(d=void 0)})),(n.modelValue===null||f===!1)&&M(o)}function M(o){e.value!==!1&&(e.value=!1,u("beforeHide",o),i!==void 0?i(o):u("hide",o))}function S(o){n.disable===!0&&o===!0?n["onUpdate:modelValue"]!==void 0&&u("update:modelValue",!1):o===!0!==e.value&&(o===!0?H:M)(d)}A(()=>n.modelValue,S),l!==void 0&&G(s)===!0&&A(()=>g.$route.fullPath,()=>{l.value===!0&&e.value===!0&&E()}),a===!0&&O(()=>{S(n.modelValue)});const C={show:w,hide:E,toggle:m};return Object.assign(g,C),C}const T=[];function pe(e){return T.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function oe(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return y(e)}else if(e.__qPortal===!0){const l=y(e);return l!==void 0&&l.$options.name==="QPopupProxy"?(e.hide(t),l):e}e=y(e)}while(e!=null)}function ve(e,t,l){for(;l!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(l--,e.$options.name==="QMenu"){e=oe(e,t);continue}e.hide(t)}e=y(e)}}function le(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function me(e,t,l,r){const i=$(!1),a=$(!1);let s=null;const n={},u=r===!0&&le(e);function g(m){if(m===!0){U(n),a.value=!0;return}a.value=!1,i.value===!1&&(u===!1&&s===null&&(s=I()),i.value=!0,T.push(e.proxy),J(n))}function d(m){if(a.value=!1,m!==!0)return;U(n),i.value=!1;const w=T.indexOf(e.proxy);w!==-1&&T.splice(w,1),s!==null&&(K(s),s=null)}return Y(()=>{d(!0)}),e.proxy.__qPortal=!0,B(e.proxy,"contentEl",()=>t.value),{showPortal:g,hidePortal:d,portalIsActive:i,portalIsAccessible:a,renderPortal:()=>u===!0?l():i.value===!0?[j(k,{to:s},l())]:void 0}}function we(e,t,l){let r;function i(){r!==void 0&&(F.remove(r),r=void 0)}return N(()=>{e.value===!0&&i()}),{removeFromHistory:i,addToHistory(){r={condition:()=>l.value===!0,handler:t},F.add(r)}}}let h=0,V,L,b,q=!1,W,z,p;function re(e){ie(e)&&x(e)}function ie(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=R(e),l=e.shiftKey&&!e.deltaX,r=!l&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),i=l||r?e.deltaY:e.deltaX;for(let a=0;a<t.length;a++){const s=t[a];if(te(s,r))return r?i<0&&s.scrollTop===0?!0:i>0&&s.scrollTop+s.clientHeight===s.scrollHeight:i<0&&s.scrollLeft===0?!0:i>0&&s.scrollLeft+s.clientWidth===s.scrollWidth}return!0}function Q(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function P(e){q!==!0&&(q=!0,requestAnimationFrame(()=>{q=!1;const{height:t}=e.target,{clientHeight:l,scrollTop:r}=document.scrollingElement;(b===void 0||t!==window.innerHeight)&&(b=l-t,document.scrollingElement.scrollTop=r),r>b&&(document.scrollingElement.scrollTop-=Math.ceil((r-b)/8))}))}function D(e){const t=document.body,l=window.visualViewport!==void 0;if(e==="add"){const{overflowY:r,overflowX:i}=window.getComputedStyle(t);V=Z(window),L=ee(window),W=t.style.left,z=t.style.top,t.style.left=`-${V}px`,t.style.top=`-${L}px`,i!=="hidden"&&(i==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),r!=="hidden"&&(r==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,v.is.ios===!0&&(l===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",P,c.passiveCapture),window.visualViewport.addEventListener("scroll",P,c.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",Q,c.passiveCapture))}v.is.desktop===!0&&v.is.mac===!0&&window[`${e}EventListener`]("wheel",re,c.notPassive),e==="remove"&&(v.is.ios===!0&&(l===!0?(window.visualViewport.removeEventListener("resize",P,c.passiveCapture),window.visualViewport.removeEventListener("scroll",P,c.passiveCapture)):window.removeEventListener("scroll",Q,c.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=W,t.style.top=z,window.scrollTo(V,L),b=void 0)}function se(e){let t="add";if(e===!0){if(h++,p!==void 0){clearTimeout(p),p=void 0;return}if(h>1)return}else{if(h===0||(h--,h>0))return;if(t="remove",v.is.ios===!0&&v.is.nativeMobile===!0){clearTimeout(p),p=setTimeout(()=>{D(t),p=void 0},100);return}}D(t)}function he(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,se(t))}}}export{ce as a,fe as b,me as c,oe as d,we as e,he as f,pe as g,ve as h,T as p,de as u};
