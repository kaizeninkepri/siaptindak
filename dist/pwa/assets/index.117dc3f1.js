import{d as b,N as M,_ as S,a as w,r as N,l as g,B as $,v as T,o as a,ad as n,g as s,w as p,ae as _,af as z,f as r,ag as P,ah as q,e as A,Z as h,ai as f,$ as B}from"./index.4e7ffe61.js";import{s as C,a as D,b as I,c as x}from"./geosearch.module.c128ee23.js";import"./index.80d289f4.js";import"./auth.f8643573.js";import{api as V}from"./axios.0a2aaee7.js";import"./ref.4ae668e5.js";const j=b("useMappingStore",{state:()=>({tileProvider:{attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},spt:{isLoading:!1,data:[]}}),actions:{async getSptData(){this.spt.isLoading=!0,await V.post("/mapping",{type:"spt-data"}).then(t=>{this.spt.data=t.data.data}).catch(t=>{M.create({message:t.response.data.messages,color:"negative",icon:"error"})}).finally(t=>{this.spt.isLoading=!1})}}}),i=j(),E=w({name:"mapping-index",components:{LMap:C,LTileLayer:D,LMarker:I,LPopup:x},setup(){const t=N(12),c=g(()=>i.spt.data[0]),d=g(()=>i.spt.data),o=$({lat:0,lng:0}),m=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(l=>{o.lat=l.coords.latitude,o.lng=l.coords.longitude})};return T(()=>{i.getSptData()}),{zoom:t,center:c,storeMap:i,marker:d,user:o,getUserLocation:m}}}),K={class:"q-pa-md"},O=z('<div class="row q-col-gutter-md justify-between items-center"><div class="col-lg-4 col-md-4 col-xs-12 col-sm-12"><div class="text-h6">DATA MANAGEMENT TITIK KOORDINAT</div><p class="text-caption">Surat Perintah Tugas, Laporan Kejadian, Laporan Informasi dan Laporan Harian</p></div><div class="col-lg-5 col-md-5 col-xs-12 col-sm-12"></div></div>',1),F={key:0},G={class:"q-mb-none"},H={class:"q-mt-none text-weight-medium"},Q={key:0};function R(t,c,d,o,m,l){const v=r("l-tile-layer"),u=r("l-marker"),y=r("l-popup"),L=r("l-map");return a(),n("div",K,[O,t.center?(a(),n("section",F,[s(L,{ref:"map",style:{height:"550px",width:"100%"},zoom:t.zoom,center:[t.center.lat,t.center.lng],class:"radius10 shadow-4"},{default:p(()=>[s(v,{url:t.storeMap.tileProvider.url,attribution:t.storeMap.tileProvider.attribution},null,8,["url","attribution"]),s(u,{visible:"","lat-lng":[t.user.lat,t.user.lng]},null,8,["lat-lng"]),(a(!0),n(P,null,q(t.marker,(e,k)=>(a(),A(u,{visible:"",key:k,"lat-lng":[e.lat,e.lng]},{default:p(()=>[s(y,null,{default:p(()=>[h("p",G,f(e.dateSpt),1),h("p",H,[s(B,{name:"groups",size:"sm",class:"q-mr-sm"}),e.petugas?(a(),n("span",Q,f(e.petugas[0].pegawai.nama),1)):_("",!0)])]),_:2},1024)]),_:2},1032,["lat-lng"]))),128))]),_:1},8,["zoom","center"])])):_("",!0)])}var tt=S(E,[["render",R]]);export{tt as default};
