import{s as y,a as k,b as $,w,O as m}from"./geosearch.module.c128ee23.js";import"./index.80d289f4.js";import{_ as C,a as z,r as l,B as f,u as L,l as M,v as _,f as i,o as O,ad as P,g as p,w as S}from"./index.4e7ffe61.js";const j=1e4,b=[];for(let t=0;t<j;t++)b.push({label:"Option "+(t+1),class:t===0?"q-pa-md bg-white text-black":"q-pa-sm self-center bg-grey-2 text-black"});const B=z({name:"mapping-index",components:{LMap:y,LTileLayer:k,LMarker:$},setup(){const t=l(null),n=new w({provider:new m,style:"bar"}),g=l(!1),c=l([.91599,104.4634]),e=f({default:{lat:.91599,lng:104.4634},user:{lat:.91599,lng:104.4634},position:{lat:.91599,lng:104.4634},address:""}),d=f({attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(o=>{e.user={lat:o.coords.latitude,lng:o.coords.longitude}})},r=async()=>{e.address="Unresolved address";try{const{lat:o,lng:h}=e.position,u=await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${o}&lon=${h}`);if(u.status===200){const v=await u.json();e.address=v.display_name}}catch(o){console.error("Reverse Geocode Error->",o)}};L(e.position,o=>{o&&r()});const s=M(()=>`<strong>${e.address.replace(",","<br/>")}</strong> <hr/><strong>lat:</strong> ${e.position.lat}<br/> <strong>lng:</strong> ${e.position.lng}`);return _(()=>{a()}),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:15,center:[.91599,104.4634],markerLatLng:c,location:e,addMarker(o){console.log(o),e.position.lat=o.latlng.lat,e.position.lng=o.latlng.lng},geoSearchOptions:{provider:new m,showMarker:!1,autoClose:!0},getUserLocation:a,dragging:g,tooltipContent:s,tileProvider:d,searchControl:n,map:t,heavyList:b}}}),q={class:"bg-secondary"};function D(t,n,g,c,e,d){const a=i("l-tile-layer"),r=i("l-marker"),s=i("l-map");return O(),P("div",q,[p(s,{ref:"map",style:{height:"380px",width:"100%","z-index":"0 !important"},zoom:t.zoom,center:[t.location.user.lat||t.location.default.lat||t.location.position.lat,t.location.user.lng||t.location.default.lng||t.location.position.lng],class:"",onClick:t.addMarker},{default:S(()=>[p(a,{url:t.tileProvider.url,attribution:t.tileProvider.attribution},null,8,["url","attribution"]),p(r,{visible:"",draggable:"","lat-lng":[t.location.position.lat,t.location.position.lng],onDragstart:n[0]||(n[0]=o=>t.dragging=!0),onDragend:n[1]||(n[1]=o=>t.dragging=!1)},null,8,["lat-lng"])]),_:1},8,["zoom","center","onClick"])])}var G=C(B,[["render",D]]);export{G as default};
