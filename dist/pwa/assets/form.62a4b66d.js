import{_ as F,a as H,r as L,aE as I,B as O,l as b,o as p,ad as c,Z as a,ai as m,g as e,w as n,aJ as K,a0 as _,aU as $,ag as Q,ah as P,ae as T,$ as V,a1 as q,am as G,aV as J,aW as M}from"./index.4e7ffe61.js";import{Q as v}from"./QCardSection.d5991535.js";import{Q as z}from"./QSeparator.cba34036.js";import{Q as f}from"./QSelect.1e3c2dc4.js";import{a as D,Q as N}from"./QEditor.a9e7f565.js";import{Q as R}from"./QPopupProxy.5bdbda15.js";import{Q as S}from"./QInput.45689bc6.js";import{Q as W}from"./QCardActions.8d232048.js";import{Q as Z}from"./QCard.3bac19a9.js";import{Q as X}from"./QForm.2a6e580a.js";import{Q as Y}from"./QInnerLoading.1db0864f.js";import{C as j}from"./ClosePopup.a44adeaa.js";import{u as x,a as aa}from"./spt.e9cfbe20.js";import{u as oa}from"./ref.4ae668e5.js";import{a as la,b as ea}from"./master.1a3bcf0d.js";import"./use-dark.310a2ad4.js";import"./QItem.83867145.js";import"./QItemLabel.3f711634.js";import"./position-engine.f00a6894.js";import"./selection.aee7b8d9.js";import"./use-prevent-scroll.7bdeec7e.js";import"./focus-manager.4350be2f.js";import"./scroll.fd17398b.js";import"./use-transition.405b2041.js";import"./use-timeout.a9330d7f.js";import"./QDialog.3ba84a94.js";import"./use-virtual-scroll.4eacf217.js";import"./rtl.8137048b.js";import"./format.00f09157.js";import"./TouchPan.b34981f9.js";import"./uid.7f2d5a47.js";import"./QTooltip.00bae92a.js";import"./use-fullscreen.d90a8f44.js";import"./auth.f8643573.js";import"./axios.0a2aaee7.js";const B=x(),U=oa(),w=la(),g=ea(),u=aa(),sa=H({name:"laporan-harian-form",setup(){K();const o=L(null);I(()=>{w.data.data.length==0&&w.getData(),g.data.data.length==0&&g.getData(),B.getData(),U.header.title="Formulir Laporan Harian",U.header.subtitle="Pengisian Laporan Harian Oleh Petugas"});const s=O({unsur:null,unsurSub:null}),y=L(null),C=b(()=>u.laporan.isLoading),k=b(()=>{const t=w.data.data.filter(d=>d.is_active==!0);return s.unsur==null||s.unsur==""?t:t.filter(d=>d.nama.toLowerCase().includes(s.unsur.toLowerCase()))}),A=b(()=>{const t=g.data.data.filter(d=>d.is_active==!0);return s.unsurSub==null||s.unsurSub==""?t:t.filter(d=>d.nama.toLowerCase().includes(s.unsurSub.toLowerCase()))}),l=b(()=>B.data.data.filter(d=>d.sptupload!=null)),r=u.laporan;return{storeRef:U,spt:l,laporan:r,unsur:k,unsurSub:A,myForm:o,isLoading:C,sptSearch:y,onSelected(t){u.laporan.spt=t,u.laporan.spt_id=t.spt_id},onSelectedSubUnsur(t){const d=g.data.data.findIndex(h=>h.unsur_sub_id==t);u.laporan.unsur_id=g.data.data[d].unsur_id},OnChangeUnggahBerkas(t,d){let h=new FileReader;u.laporan.attacemnt[d].berkas=t.target.files[0],h.readAsDataURL(t.target.files[0]),h.onload=async E=>{u.laporan.attacemnt[d].url=E.target.result,u.laporan.attacemnt[d].spt_id=u.laporan.spt_id}},onValidateToDabases(){o.value.validate().then(t=>{t&&u.insertDataWithUpload()})},addAttacment(){u.addAttacment()},deleteAttacment(t){u.laporan.attacemnt.splice(t,1)}}}}),i=o=>(J("data-v-cb78cd86"),o=o(),M(),o),ta={class:"q-mt-md"},na={class:"row justify-center"},ra={class:"col-lg-8 col-md-10 col-sm-12 col-xs-12"},da={class:"row justify-between items-center q-col-gutter-md"},ia={class:"col-lg-5 col-md-5 col-xs-12 col-sm-12"},ua={class:"text-h6"},ma={class:"text-caption"},pa={class:"col-lg-3 col-md-3 col-xs-12 col-sm-12 text-right"},ca={class:"bg-grey-4 radius10 q-pa-md"},_a={class:"col-lg-3 col-md-3 col-sm-8 col-xs-8"},fa=i(()=>a("span",{class:"text-caption"},"Nomor SPT",-1)),ga={class:"q-mb-none"},ha={class:"col-lg-2 col-md-2 col-sm-4 col-xs-4"},ba=i(()=>a("span",{class:"text-caption"},"Jam",-1)),va={class:"q-mb-none"},Va={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},Sa=i(()=>a("span",{class:"text-caption"},"Tempat",-1)),Ua={class:"q-mb-none"},wa={class:"q-mt-md"},ya=i(()=>a("p",{class:"q-mb-xs text-weight-bold"},"IDENTITAS SURAT PERINTAH TUGAS",-1)),Ca=i(()=>a("td",null,"Nomor",-1)),ka=i(()=>a("td",null," : ",-1)),Aa=i(()=>a("td",null,"Tanggal",-1)),La=i(()=>a("td",null," : ",-1)),Qa=i(()=>a("td",{valign:"top"},"Dasar",-1)),Pa=i(()=>a("td",{valign:"top"}," : ",-1)),Ta={valign:"top"},qa={key:0,valign:"top"},Da=i(()=>a("td",{width:"150px"},"Lokasi Kegiatan",-1)),Na=i(()=>a("td",null," : ",-1)),Ra=i(()=>a("p",{class:"q-mb-sm text-weight-bold"},"LAPORAN PETUGAS",-1)),ja={class:"row q-col-gutter-sm"},Ba={class:"col-lg-7 col-md-7 col-sm-12 col-xs-12"},Ea={class:"col-lg-5 col-md-5 col-sm-12 col-xs-12"},Fa={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},Ha={class:"row items-center justify-end"},Ia={class:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},Oa={class:"row items-center justify-end"},Ka={class:"col-lg-6 col-md-6 col-sm-12 col-xs-12"},$a={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},Ga={class:"row q-col-gutter-sm q-mt-sm"},Ja={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},Ma={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},za=i(()=>a("p",{class:"q-mb-sm text-weight-bold"},"UNGGAH BERKAS / FOTO PENDUKUNG",-1)),Wa={class:"col-lg-6 col-md-6 col-sm-12 col-xs-12"},Za={class:"col-lg-5 col-md-5 col-sm-12 col-xs-12"},Xa=["id","onChange"],Ya=["for"],xa={key:0,class:"col-lg-1 col-md-1 col-xs-2 col-sm-2"},ao={class:"row q-mt-md"},oo={class:"col-lg-3 col-md-3 col-xs-12 col-sm-12"};function lo(o,s,y,C,k,A){return p(),c("div",ta,[a("pre",null,m(o.spt),1),a("div",na,[a("div",ra,[e(X,{ref:"myForm"},{default:n(()=>[e(Z,{class:"radius10"},{default:n(()=>[e(v,null,{default:n(()=>[a("div",da,[a("div",ia,[a("div",ua,m(o.storeRef.header.title),1),a("p",ma,m(o.storeRef.header.subtitle),1)]),a("div",pa,[e(_,{label:"Data Laporan",icon:"arrow_back_ios",color:"secondary",class:"radius5",to:{name:"laporan"}})])])]),_:1}),e(v,null,{default:n(()=>[a("div",ca,[a("section",null,[e(f,{modelValue:o.sptSearch,"onUpdate:modelValue":[s[0]||(s[0]=l=>o.sptSearch=l),o.onSelected],dense:"",filled:"",label:"Surat Perintah Tugas",options:o.spt},{option:n(({itemProps:l,opt:r})=>[a("div",$(l,{class:"row q-pa-md q-col-gutter-sm cursor-pointer selecetedData"}),[a("div",_a,[fa,a("p",ga,m(r.sptupload.nomor),1)]),a("div",ha,[ba,a("p",va,m(r.jam),1)]),a("div",Va,[Sa,a("p",Ua,m(r.tempat),1)])],16),e(z)]),_:1},8,["modelValue","options","onUpdate:modelValue"])]),a("section",wa,[ya,a("table",null,[a("tr",null,[Ca,ka,a("td",null,m(o.laporan.spt.sptupload.nomor),1)]),a("tr",null,[Aa,La,a("td",null,m(o.laporan.spt.tgl_awal),1)]),a("tr",null,[Qa,Pa,a("td",null,[a("table",null,[(p(!0),c(Q,null,P(o.laporan.spt.dasar_uud,(l,r)=>(p(),c("tr",{key:r},[a("td",Ta,m(r+1)+". ",1),l.undang?(p(),c("td",qa,m(l.undang.nama),1)):T("",!0)]))),128))])])]),a("tr",null,[Da,Na,a("td",null,m(o.laporan.spt.tempat),1)])])])])]),_:1}),e(v,null,{default:n(()=>[a("section",null,[Ra,a("div",ja,[a("div",Ba,[e(f,{dense:"",filled:"",label:"Sub Unsur",modelValue:o.laporan.unsur_sub_id,"onUpdate:modelValue":[s[1]||(s[1]=l=>o.laporan.unsur_sub_id=l),o.onSelectedSubUnsur],options:o.unsurSub,"map-options":"","option-label":"nama","option-value":"unsur_id","emit-value":"",rules:[l=>l!==null&&l!==""||"Please type something"]},null,8,["modelValue","options","onUpdate:modelValue","rules"])]),a("div",Ea,[e(f,{dense:"",filled:"",label:"Unsur",modelValue:o.laporan.unsur_id,"onUpdate:modelValue":s[2]||(s[2]=l=>o.laporan.unsur_id=l),options:o.unsur,"map-options":"","option-label":"nama","option-value":"unsur_id","emit-value":"",rules:[l=>l!==null&&l!==""||"Please type something"]},null,8,["modelValue","options","rules"])]),a("div",Fa,[e(S,{dense:"",filled:"",mask:"time",label:"Jam Mulai","bg-color":"teal-1",modelValue:o.laporan.spt.jam,"onUpdate:modelValue":s[4]||(s[4]=l=>o.laporan.spt.jam=l),rules:["time"]},{append:n(()=>[e(V,{name:"access_time",class:"cursor-pointer"},{default:n(()=>[e(R,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:n(()=>[e(D,{format24h:"",modelValue:o.laporan.jam,"onUpdate:modelValue":s[3]||(s[3]=l=>o.laporan.jam=l)},{default:n(()=>[a("div",Ha,[q(e(_,{label:"Close",color:"primary",flat:""},null,512),[[j]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),a("div",Ia,[e(S,{dense:"",filled:"",mask:"time",modelValue:o.laporan.jam_selesai,"onUpdate:modelValue":s[6]||(s[6]=l=>o.laporan.jam_selesai=l),label:"Jam Selesai","bg-color":"teal-1",rules:["time"]},{append:n(()=>[e(V,{name:"access_time",class:"cursor-pointer"},{default:n(()=>[e(R,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:n(()=>[e(D,{format24h:"",modelValue:o.laporan.jam_selesai,"onUpdate:modelValue":s[5]||(s[5]=l=>o.laporan.jam_selesai=l)},{default:n(()=>[a("div",Oa,[q(e(_,{label:"Close",color:"primary",flat:""},null,512),[[j]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),a("div",Ka,[e(f,{options:["LAPORAN KEJADIAN","LAPORAN HARIAN"],modelValue:o.laporan.solusi,"onUpdate:modelValue":s[7]||(s[7]=l=>o.laporan.solusi=l),label:"Solusi / Tindakan",filled:"",dense:"",rules:[l=>l!==null&&l!==""||"Please type something"]},null,8,["modelValue","rules"])]),a("div",$a,[e(S,{modelValue:o.laporan.tempat,"onUpdate:modelValue":s[8]||(s[8]=l=>o.laporan.tempat=l),label:"Tempat",filled:"",dense:"",rules:[l=>l!==null&&l!==""||"Please type something"]},null,8,["modelValue","rules"])])]),a("div",Ga,[a("div",Ja,[e(N,{label:"Temuan Dalam Kegiatan",placeholder:"Temuan Dalam Kegiatan",modelValue:o.laporan.temuan,"onUpdate:modelValue":s[9]||(s[9]=l=>o.laporan.temuan=l)},null,8,["modelValue"])]),a("div",Ma,[e(N,{label:"Saran / Catatan",placeholder:"Saran / Catatan",modelValue:o.laporan.saran,"onUpdate:modelValue":s[10]||(s[10]=l=>o.laporan.saran=l)},null,8,["modelValue"])])])])]),_:1}),e(v,null,{default:n(()=>[a("section",null,[za,(p(!0),c(Q,null,P(o.laporan.attacemnt,(l,r)=>(p(),c("div",{class:"row q-col-gutter-sm q-mb-sm",key:r},[a("div",Wa,[e(f,{dense:"",filled:"",label:"Nama Berkas",modelValue:l.nomor,"onUpdate:modelValue":t=>l.nomor=t,options:["Foto Lokasi","Berkas Laporan"]},null,8,["modelValue","onUpdate:modelValue"])]),a("div",Za,[a("input",{type:"file",name:"file",id:r,class:"inputfile",onChange:t=>o.OnChangeUnggahBerkas(t,r)},null,40,Xa),a("label",{for:r},[e(V,{name:"upload",size:"sm",class:"q-mr-sm"}),G("Pilih Berkas (.Pdf / .png, .jpg)")],8,Ya)]),r!=0?(p(),c("div",xa,[e(_,{icon:"delete",color:"red-5",class:"radius5",onClick:t=>o.deleteAttacment(r)},null,8,["onClick"])])):T("",!0)]))),128)),a("div",ao,[a("div",oo,[e(_,{label:"Tambah Attacment",color:"secondary",class:"radius5",unelevated:"",onClick:o.addAttacment},null,8,["onClick"])])])])]),_:1}),e(W,null,{default:n(()=>[e(_,{label:"ok, Kirim Laporan",color:"primary",onClick:o.onValidateToDabases},null,8,["onClick"])]),_:1})]),_:1})]),_:1},512),e(Y,{showing:o.isLoading,label:"Mohon Menunggu, Memproses Laporan Harian ...","label-class":"text-teal","label-style":"font-size: 1.1em"},null,8,["showing"])])])])}var Fo=F(sa,[["render",lo],["__scopeId","data-v-cb78cd86"]]);export{Fo as default};
