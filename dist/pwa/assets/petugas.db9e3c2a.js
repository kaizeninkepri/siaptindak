import{_ as N,a as I,aJ as U,aE as T,r as $,B as M,l as w,N as h,o as c,ad as g,Z as t,g as a,a0 as m,w as o,$ as j,ag as P,ah as k,ai as d,am as p,ae as S,e as q,aP as F,aV as E,aW as G}from"./index.4e7ffe61.js";import{Q as R}from"./QInput.45689bc6.js";import{Q as z}from"./QBadge.5a60af85.js";import{Q as H}from"./QBanner.0f8aee67.js";import{Q as J}from"./QPopupProxy.5bdbda15.js";import{a as C,Q as f}from"./QItem.83867145.js";import{Q as b}from"./QItemLabel.3f711634.js";import{Q as L}from"./QSelect.1e3c2dc4.js";import{Q as V}from"./QCardSection.d5991535.js";import{Q as O}from"./QImg.4440f14c.js";import{Q as B}from"./QCard.3bac19a9.js";import{Q as W}from"./QInnerLoading.1db0864f.js";import{Q as Y}from"./QDialog.3ba84a94.js";import{u as x}from"./spt.e9cfbe20.js";import{u as K}from"./auth.f8643573.js";import{api as D}from"./axios.0a2aaee7.js";import"./use-dark.310a2ad4.js";import"./uid.7f2d5a47.js";import"./focus-manager.4350be2f.js";import"./position-engine.f00a6894.js";import"./selection.aee7b8d9.js";import"./use-prevent-scroll.7bdeec7e.js";import"./scroll.fd17398b.js";import"./use-transition.405b2041.js";import"./use-timeout.a9330d7f.js";import"./use-virtual-scroll.4eacf217.js";import"./rtl.8137048b.js";import"./format.00f09157.js";import"./ref.4ae668e5.js";const u=x(),Z=K(),X=I({name:"spt-detail-petugas",setup(){const e=U();T(()=>{if(u.pegawai.data.length==0){u.pegawaiAvaibaleGet();return}});const i=$(null),n=M({dialog:!1,search:null,pegawai_id:null,spt_id:e.query.id,jabatan_spt:"Anggota",isLoading:!1,container:[]}),v=w(()=>{const s=u.pegawai.data.filter(r=>r.is_active==!0);return n.search==""||n.search==null?s:s.filter(r=>r.nama.toLowerCase().includes(n.search.toLowerCase()))}),y=w(()=>u.onDetail.isLoading),Q=w(()=>u.onDetail.data),l=w(()=>{const s=u.onDetail.data.petugas;return i.value==null||i.value==""?s:s.filter(r=>r.pegawai.nama.toLowerCase().includes(i.value.toLowerCase()))});return{isLoading:y,spt:Q,pegawai:l,search:i,pegawaiAdd:n,pegawaiForm:v,filterPegawaiFn(s,r){if(s===""){r(()=>{n.search=null});return}r(()=>{const _=s.toLowerCase();n.search=_})},onSelected(s){n.container.push({pegawai_id:s.pegawai_id,nama:s.nama,nip:s.nip,jabatan_spt:n.jabatan_spt}),n.pegawai_id=null},async onDeletePetugas(s,r){await D.post("/spt",{type:"spt-pegawai-delete",id:s}).then(_=>{u.onDetail.data.petugas.splice(r,1),h.create({message:"Berhasil Menghapus Petugas",color:"positive",icon:"infor"})}).catch(_=>{h.create({message:_.response.data.messages,color:"negative",icon:"error"})}).finally(_=>{this.onDetail.isLoading=!1})},async onAddPetugas(){n.isLoading=!0,await D.post("/spt",{type:"spt-pegawai-add",data:n.container,user_id:Z.active.id,sptid:e.query.id}).then(s=>{u.onDetail.data.petugas=s.data.data,n.dialog=!1,n.container=[],h.create({message:"Berhasil Menambahkan Petugas",color:"positive",icon:"infor"})}).catch(s=>{h.create({message:s.response.data.messages,color:"negative",icon:"error"})}).finally(s=>{n.isLoading=!1})}}}}),A=e=>(E("data-v-d069ea24"),e=e(),G(),e),aa={class:"row q-col-gutter-sm q-mb-sm items-center"},ea={class:"col-lg-4 col-md-4 col-sm-6 col-xs-6"},ta={class:"col-lg-4 col-md-4 col-sm-6 col-xs-6 text-right"},sa={class:"col-lg-4 col-md-4 col-sm-12 col-xs-12"},oa={style:{"overflow-x":"auto"}},la={class:"tableDetailPetugas"},ia=A(()=>t("thead",null,[t("tr",{class:"bg-indigo-2"},[t("th",{class:"text-center"},"No"),t("th",null,"NIP"),t("th",null,"Nama"),t("th",null,"Jabatan SPT"),t("th",{class:"text-center"},"Status Laporan"),t("th",{class:"text-center"})])],-1)),na={class:"text-center"},ra={class:"text-center"},da={class:"text-center"},pa=A(()=>t("br",null,null,-1)),ua=A(()=>t("br",null,null,-1)),ca=A(()=>t("img",{src:"/images/siaptindak.png",style:{width:"80px"}},null,-1)),ma={class:"row q-col-gutter-sm"},ga={class:"col-lg-3 col-md-3 col-sm-10 col-xs-10"},fa={class:"col-lg-8 col-md-8 col-sm-12 col-xs-12"},_a={key:0,class:"text-center"},wa={key:1},ha={class:"q-gutter-sm"};function ba(e,i,n,v,y,Q){return c(),g("div",null,[t("div",aa,[t("div",ea,[a(m,{label:"Rincian Data Petugas","no-caps":"",color:"gery-9",flat:"",style:{"margin-left":"-13px"}})]),t("div",ta,[a(m,{label:"Tambah Petugas","no-caps":"",color:"primary",flat:"",onClick:i[0]||(i[0]=l=>e.pegawaiAdd.dialog=!0)})]),t("div",sa,[a(R,{dense:"",filled:"",placeholder:"Cari Nama Petugas",modelValue:e.search,"onUpdate:modelValue":i[1]||(i[1]=l=>e.search=l)},{prepend:o(()=>[a(j,{name:"search"})]),_:1},8,["modelValue"])])]),t("div",oa,[t("table",la,[ia,t("tbody",null,[(c(!0),g(P,null,k(e.pegawai,(l,s)=>(c(),g("tr",{key:s},[t("td",na,d(s+1),1),t("td",null,d(l.pegawai.nip),1),t("td",null,d(l.pegawai.nama),1),t("td",null,d(l.jabatan_spt),1),t("td",ra,[a(z,{color:"secondary"},{default:o(()=>[p("Laporan Belum di Unggah")]),_:1})]),t("td",da,[a(m,{label:"Hapus",color:"red-5",icon:"delete",size:"sm"},{default:o(()=>[a(J,null,{default:o(()=>[a(H,null,{default:o(()=>[p(" Yakin Menghapus Data ini ? "),pa,p(" Nama : "+d(l.pegawai.nama)+" ",1),ua,a(m,{label:"Ok",color:"positive",icon:"delete",size:"sm",onClick:r=>e.onDeletePetugas(l.spt_pegawai_id,s)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))])])]),a(Y,{persistent:"",modelValue:e.pegawaiAdd.dialog,"onUpdate:modelValue":i[5]||(i[5]=l=>e.pegawaiAdd.dialog=l)},{default:o(()=>[a(B,{style:{width:"700px","max-width":"80vw"},class:"radius10"},{default:o(()=>[a(C,null,{default:o(()=>[a(f,{avatar:""},{default:o(()=>[ca]),_:1}),a(f),a(f,{side:"",class:"text-black"},{default:o(()=>[a(b,null,{default:o(()=>[p("PETUGAS SURAT PERINTAH TUGAS")]),_:1}),a(b,{caption:""},{default:o(()=>[p("Penambahan Pegawai")]),_:1})]),_:1})]),_:1}),a(V,null,{default:o(()=>[t("div",ma,[t("div",ga,[a(L,{options:["Anggota"],filled:"",dense:"",label:"Jabatan SPT",modelValue:e.pegawaiAdd.jabatan_spt,"onUpdate:modelValue":i[2]||(i[2]=l=>e.pegawaiAdd.jabatan_spt=l)},null,8,["modelValue"])]),t("div",fa,[a(L,{filled:"",dense:"",label:"Nama Pegawai",modelValue:e.pegawaiAdd.pegawai_id,"onUpdate:modelValue":[i[3]||(i[3]=l=>e.pegawaiAdd.pegawai_id=l),e.onSelected],options:e.pegawaiForm,"option-label":"nama","option-value":"pegawai_id","option-disable":"isSelected","use-input":"","input-debounce":"0",onFilter:e.filterPegawaiFn},null,8,["modelValue","options","onFilter","onUpdate:modelValue"])])])]),_:1}),a(V,{class:"bg-grey-3"},{default:o(()=>[e.pegawaiAdd.container.length==0?(c(),g("section",_a," BELUM ADA PEGAWAI YANG DI TAMBAHKAN ")):S("",!0),e.pegawaiAdd.container.length!=0?(c(),g("section",wa,[(c(!0),g(P,null,k(e.pegawaiAdd.container,(l,s)=>(c(),q(B,{class:"q-mb-sm radius10",key:s},{default:o(()=>[a(C,null,{default:o(()=>[a(f,{avatar:""},{default:o(()=>[a(F,null,{default:o(()=>[a(O,{src:"/images/profile_1.png"})]),_:1})]),_:1}),a(f,null,{default:o(()=>[a(b,null,{default:o(()=>[p(d(l.nama),1)]),_:2},1024),a(b,{caption:""},{default:o(()=>[p(d(l.nip),1)]),_:2},1024)]),_:2},1024),a(f,{side:""},{default:o(()=>[p(d(l.jabatan_spt)+" ",1),a(m,{icon:"delete",color:"red-5",size:"sm",flat:"",label:"hapus",onClick:r=>e.pegawaiAdd.container.splice(s,1)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])):S("",!0),t("div",ha,[a(m,{label:"Ok,Proses",color:"primary",class:"radius5",onClick:e.onAddPetugas,disable:e.pegawaiAdd.container.length==0},null,8,["onClick","disable"]),a(m,{label:"Batal",color:"grey-8",flat:"",class:"radius5",onClick:i[4]||(i[4]=l=>(e.pegawaiAdd.dialog=!1,e.pegawaiAdd.container=[]))})])]),_:1}),a(W,{showing:e.pegawaiAdd.isLoading,label:"Mohon Menunggu, memproses data...","label-class":"text-secondary","label-style":"font-size: 1.1em"},null,8,["showing"])]),_:1})]),_:1},8,["modelValue"])])}var Ya=N(X,[["render",ba],["__scopeId","data-v-d069ea24"]]);export{Ya as default};
