import{d as r,P as s,N as i}from"./index.4e7ffe61.js";import{api as o}from"./axios.0a2aaee7.js";import{u as n}from"./ref.4ae668e5.js";const u=n(),d=r("useAuthStore",{state:()=>({login:s.getItem("221122-user")!=null,active:s.getItem("221122-user")==null?{}:s.getItem("221122-user"),isLoading:!1,username:null,password:null,loginInfo:{isError:!1,text:"Mohon Menunggu, Autentikasi akun Anda"},sidebar:[]}),getters:{isLogin(e){return e.login}},actions:{setLogin(){this.isLoading=!0,this.loginInfo.text="Mohon Menunggu, Autentikasi akun Anda",o.post("/users",{type:"login",data:{username:this.username,password:this.password}}).then(e=>{this.loginInfo.isError=!1,this.login=!0,s.set("221122-user",e.data),this.active=e.data,i.create({message:"Autentikasi Berhasil",color:"primary",position:"top-right",icon:"info"}),window.setTimeout(a=>{this.isLoading=!1,this.router.push({name:"users"})},1500)}).catch(e=>{console.log(e),this.isLoading=!1,this.loginInfo.isError=!0}).finally(e=>{})},set_sidebar(){o.post("/ref",{type:"sidebar",id:this.active.id}).then(e=>{this.sidebar=e.data}).catch(e=>{i.create({message:e.response.data.messages,color:"negative",icon:"error"})}).finally(e=>{})},setAuthToken(e,a){o.post("/users",{type:"get-auth-token",id:a,token:e}).then(t=>{}).catch(t=>{i.create({message:t.response.data.messages,color:"negative",icon:"error"})}).finally(t=>{})},logout(){this.isLoading=!0,s.remove("221122-user"),window.setTimeout(e=>{this.isLoading=!1,u.dialog.logout=!1,this.router.push({name:"login"})},1500)}}});export{d as u};
