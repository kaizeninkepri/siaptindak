import{Q as b}from"./QSelect.1e3c2dc4.js";import{s as y,a as h,e as v,b as C,O as $}from"./geosearch.module.c128ee23.js";import"./index.80d289f4.js";import{_ as L,a as w,r as g,l as f,B as k,f as i,o as V,ad as S,Z as T,g as l,w as _,am as z}from"./index.4e7ffe61.js";import{u as M}from"./spt.e9cfbe20.js";import"./QInput.45689bc6.js";import"./use-dark.310a2ad4.js";import"./uid.7f2d5a47.js";import"./focus-manager.4350be2f.js";import"./QItem.83867145.js";import"./QItemLabel.3f711634.js";import"./position-engine.f00a6894.js";import"./selection.aee7b8d9.js";import"./use-prevent-scroll.7bdeec7e.js";import"./scroll.fd17398b.js";import"./use-transition.405b2041.js";import"./use-timeout.a9330d7f.js";import"./QDialog.3ba84a94.js";import"./use-virtual-scroll.4eacf217.js";import"./rtl.8137048b.js";import"./format.00f09157.js";import"./auth.f8643573.js";import"./axios.0a2aaee7.js";import"./ref.4ae668e5.js";const r=M(),B=w({name:"spt-mapping",components:{LMap:y,LTileLayer:h,LControl:v,LMarker:C},setup(){g(null);const t=new $,o=f(()=>r.spt.lat),d=f(()=>r.spt.lng),u=k({attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),c=g(15),a=k({data:[],search:null});return{lat:o,lng:d,searchControl:a,zoom:c,tileProvider:u,provider:t,async onTypeData(e,p){const s=await t.search({query:e});p(()=>{if(a.data=s,e==="")a.data=s;else{const m=e.toLowerCase();a.data.filter(n=>n.label.toLowerCase().includes(m))}})},onSelected(e){r.spt.lat=e.y,r.spt.lng=e.x},addMarker(e){r.spt.lat=e.latlng.lat,r.spt.lng=e.latlng.lng}}}}),D={class:""};function N(t,o,d,u,c,a){const e=i("l-tile-layer"),p=i("l-control"),s=i("l-marker"),m=i("l-map");return V(),S("div",null,[T("div",D,[l(b,{class:"q-mb-sm",filled:"",label:"Ketik Nama Tempat, Tentukan Titik Lokasi",options:t.searchControl.data,modelValue:t.searchControl.search,"onUpdate:modelValue":[o[0]||(o[0]=n=>t.searchControl.search=n),t.onSelected],dense:"","use-input":"","input-debounce":"0",onFilter:t.onTypeData},null,8,["options","modelValue","onFilter","onUpdate:modelValue"])]),l(m,{ref:"map",style:{height:"380px",width:"100%","z-index":"0 !important"},zoom:t.zoom,center:[t.lat,t.lng],onClick:t.addMarker},{default:_(()=>[l(e,{url:t.tileProvider.url,attribution:t.tileProvider.attribution},null,8,["url","attribution"]),l(p,{position:"bottomleft",class:"custom-control-watermark"},{default:_(()=>[z(" Vue2Leaflet Watermark Control ")]),_:1}),l(s,{visible:"",draggable:"","lat-lng":[t.lat,t.lng],onDragstart:o[1]||(o[1]=n=>t.dragging=!0),onDragend:o[2]||(o[2]=n=>t.dragging=!1)},null,8,["lat-lng"])]),_:1},8,["zoom","center","onClick"])])}var at=L(B,[["render",N]]);export{at as default};
