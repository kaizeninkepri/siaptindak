import{d as o,N as s,l as r}from"./index.4e7ffe61.js";import{api as i}from"./axios.0a2aaee7.js";o("useAclStore",{state:()=>({drawerRight:{modul:!1}}),getters:{doubleCount(e){return e.counter*2}},actions:{increment(){this.counter++}}});const n=o("useModulStore",{state:()=>({dialog:{form:!1,formChild:!1},form:{modul_id:null,nama:null,icon:null,is_active:!0,is_navbar:!0,route_name:null,route_url:null},child:{modul_id:null,nama:null,icon:null,is_active:!0,modul_child_id:null,is_navbar:!0,route_name:null,route_url:null},loading:{form:!1,table:!1},data:[]}),getters:{rows(e){return e.data.map((a,l)=>(a.index=l,a))},options(e){return e.data.filter((a,l)=>a.is_active==!0)}},actions:{set_modul(){this.loading.form=!0,i.post("/acl",{type:"store-modul",data:this.form}).then(e=>{this.data.findIndex(a=>a.modul_id==e.data.data.modul_id),e.data.status||this.data.push(e.data.data),s.create({message:"Modul : "+e.data.data.nama+" "+e.data.message,color:"positive",position:"top-right",icon:"check_circle"}),this.form={modul_id:null,nama:null,icon:null,is_active:!0,is_navbar:!0,route_name:null,route_url:null},this.dialog.form=!1}).catch(e=>{s.create({message:e.response.data.messages,color:"negative",icon:"error"})}).finally(e=>{this.loading.form=!1})},set_modul_child(){this.loading.form=!0,this.data.findIndex(e=>e.modul_id==this.child.modul_id),i.post("/acl",{type:"store-modul-child",data:this.child}).then(e=>{this.get_modul(),s.create({message:"Modul Child : "+e.data.data.nama+" "+e.data.message,color:"positive",position:"top-right",icon:"check_circle"}),this.child={modul_id:null,nama:null,icon:null,is_active:!0,modul_child_id:null,is_navbar:!0,route_name:null,route_url:null},this.dialog.formChild=!1}).catch(e=>{s.create({message:e.response.data.messages,color:"negative",icon:"error"})}).finally(e=>{this.loading.form=!1})},set_delete_modul(e,a){this.loading.table=!0,i.post("/acl",{type:"delete-modul",id:a}).then(l=>{this.data.splice(e,1),s.create({message:"Modul Berhasil di hapuskan",color:"positive",position:"top-right",icon:"check_circle"}),this.loading.table=!1}).catch(l=>{s.create({message:l.response.data.messages,color:"negative",icon:"error"})}).finally(l=>{this.loading.form=!1})},set_delete_modul_child(e,a){this.loading.table=!0,i.post("/acl",{type:"delete-modul-child",id:a}).then(l=>{this.get_modul(),s.create({message:"Modul Berhasil di hapuskan",color:"positive",position:"top-right",icon:"check_circle"}),this.loading.table=!1}).catch(l=>{s.create({message:l.response.data.messages,color:"negative",icon:"error"})}).finally(l=>{this.loading.form=!1})},get_modul(){this.loading.table=!0,i.post("/acl",{type:"get-modul",data:this.form}).then(e=>{this.data=e.data,this.dialog.table=!1}).catch(e=>{s.create({message:e.response.data.messages,color:"negative",icon:"error"})}).finally(e=>{this.loading.table=!1})}}}),c=o("useRolesStore",{state:()=>({form:{role_id:null,nama:null,is_active:!0},permission:[],loading:{form:!1,table:!1},data:[]}),getters:{rows(e){return e.data.map((a,l)=>(a.index=l,a))},options(e){return e.data.filter((a,l)=>a.is_active==!0)}},actions:{set_permission(){this.loading.form=!0,i.post("/acl",{type:"store-roles",data:this.form,permission:this.permission}).then(e=>{this.router.push({name:"acl-roles"}),s.create({message:e.data.data.messages,position:"top-right",color:"positive",icon:"check_circle"}),this.form.role_id=null,this.get_permission()}).catch(e=>{s.create({message:e.response.data.messages,color:"negative",icon:"error"})}).finally(e=>{this.loading.form=!1})},set_delete_permission(e,a){this.loading.table=!0,i.post("/acl",{type:"delete-permission",id:a}).then(l=>{this.data.splice(e,1),s.create({message:"Roles Berhasil di hapuskan",color:"positive",position:"top-right",icon:"check_circle"}),this.loading.table=!1}).catch(l=>{s.create({message:l.response.data.messages,color:"negative",icon:"error"})}).finally(l=>{this.loading.form=!1})},get_permission(){this.loading.form=!0,i.post("/acl",{type:"get-permission",id:this.form.role_id}).then(e=>{this.permission=e.data.permission,this.form=e.data.role,this.dialog.table=!1}).catch(e=>{s.create({message:e.response.data.messages,color:"negative",icon:"error"})}).finally(e=>{this.loading.form=!1})},get_roles(){this.loading.table=!0,i.post("/acl",{type:"get-roles"}).then(e=>{this.data=e.data}).catch(e=>{s.create({message:e.response.data.messages,color:"negative",icon:"error"})}).finally(e=>{this.loading.table=!1})}}}),m=o("useModulStoreTable",()=>{const e=[{name:"index",required:!0,label:"#",align:"left",field:t=>t.index+1,format:t=>`${t}`,sortable:!0},{name:"nama",align:"left",label:"Nama Modul",field:t=>t.nama,format:t=>`${t}`,sortable:!0},{name:"icon",align:"left",label:"icon",field:t=>t.icon},{name:"route_name",align:"left",label:"Nama Route",field:t=>t.route_name,format:t=>`${t}`,sortable:!0},{name:"url",align:"left",label:"URL",field:t=>t.route_url,format:t=>`${t}`,sortable:!0},{name:"child",align:"center",label:"Child",field:t=>t.child.length,format:t=>`${t}`,sortable:!0},{name:"is_active",align:"left",label:"Aktif",field:t=>t.is_active,format:t=>`${t}`,sortable:!0}],a=r(()=>n().rows),l=r(()=>n().loading.table);return{columns:e,rows:a,isLoading:l}});export{n as a,m as b,c as u};
